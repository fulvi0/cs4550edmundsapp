<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Search Vehicles</title>
		<link rel="stylesheet" href="views/search/css/search.css"></a>
	</head>
	
    <body ng-app="SearchCtrl">
    	<div class="container">
	        <h1 id="search-title">Search Vehicles</h1>
	        <div class ="col-md-12 row" id="search-display-container">
	        	<div class="search-label col-md-1">
	        		Brand:
	        	</div>
	        	<div class ="col-md-3">
					<select id="brandselect"
							ng-options="make.niceName as make.name for make in makes"
					        ng-change="updateSearchResults()"
					        ng-model="currentMake"
					        class="form-control" id="select">
					</select>
				</div>

	        	<div class="search-label col-md-1">
	        		Year:
	        	</div>
				<div class ="col-md-3">
					<select ng-model="currentYear"
					        ng-change="updateSearchResults()"
					        class="form-control" id="select">
					        <option value="2015">2015</option>
					        <option value="2014">2014</option>
					        <option value="2013">2013</option>
					        <option value="2012">2012</option>
					        <option value="2011">2011</option>
					        <option value="2010">2010</option>
					        <option value="2009">2009</option>
					        <option value="2008">2008</option>
					        <option value="2007">2007</option>
					        <option value="2006">2006</option>
					        <option value="2005">2005</option>
					        <option value="2004">2004</option>
					        <option value="2003">2003</option>
					        <option value="2002">2002</option>
					        <option value="2001">2001</option>
					        <option value="2000">2000</option>
					        <option value="1999">1999</option>
					        <option value="1998">1998</option>
					        <option value="1997">1997</option>
					        <option value="1996">1996</option>
					        <option value="1995">1995</option>
					</select>
				</div>

				<div class="search-label col-md-1">
	        		Type:
	        	</div>
				<div class ="col-md-3">
					<select ng-model="currentCategory"
					        ng-change="updateSearchResults()"
					        class="form-control" id="select">
					        <option value="">All Types</option>
							<option value="4dr Hatchback">4dr Hatchback</option>
							<option value="Coupe">Coupe</option>
							<option value="Convertible">Convertible</option>
							<option value="Sedan" selected="selected">Sedan</option>
							<option value="2dr Hatchback">2dr Hatchback</option>
							<option value="Wagon">Wagon</option>
							<option value="Regular Cab Pickup">Regular Cab Pickup</option>
							<option value="Extended Cab Pickup">Extended Cab Pickup</option>
							<option value="Crew Cab Pickup">Crew Cab Pickup</option>
							<option value="2dr SUV">2dr SUV</option>
							<option value="4dr SUV">4dr SUV</option>
							<option value="Convertible SUV">Convertible SUV</option>
							<option value="Cargo Van">Cargo Van/option>
							<option value="Passenger Van">Passenger Van</option>
							<option value="Cargo Minivan">Cargo Minivan</option>
							<option value="Passenger Minivan">Passenger Minivan</option>
					</select>
				</div>
			</div>
			<hr>
	        <table class="table" id="vehicle-list-table">
	            <tbody ng-repeat="model in models">
	                <tr>
	                    <td class="model-name">{{model.name}}</td>
	                    <td>
	                        <button ng-click="" class="btn btn-info pull-right" class="clickable" data-toggle="collapse" data-target="#{{model.niceName}}">
	                        	View All Models
	                            <!--<span class="glyphicon glyphicon-star">+</span>-->
	                        </button>
	                    </td>
	                </tr>
	                <tr>
	                	<td>
	                		<div id="{{model.niceName}}" class="collapse">
	                			<table class="table">
	                				<thead>
	                					<tr>
	                						<td>Model</td>
	                						<td></td>
											<td></td>
	                					</tr>
	                				</thead>
	                				<!-- we restrict search to a single year so year[0] is always what we need to access -->
	                				<tbody ng-repeat="vehicle in model.years[0].styles">
	                					<tr>
	                						<td>{{vehicle.name}}</td>
	                						<td></td>
											<td></td>
	                						<td>
	                							<button ng-if="currentUser && currentUserFavorites.indexOf(vehicle.id) == -1"
	                								    ng-click="favoriteCar(currentUser.username, vehicle.id, vehicle.name, model.years[0].year)" class="btn btn-info pull-right">
	                								Favorite
	                        					</button>
	                        					<button ng-if="currentUser && currentUserFavorites.indexOf(vehicle.id) != -1"
	                									ng-click="unFavoriteCar(currentUser.username, vehicle.id)" class="btn btn-info pull-right">
	                								Unfavorite
	                        					</button>
	                        				</td>

	                						<td>
	                							<button ng-click="goToDetailsPage(vehicle.id)" class="btn btn-info pull-right">
	                							More Info
	                        					</button>
	                        				</td>
	                					</tr>
	                				<tbody>
	                			</table>
	                		</div>

	                	</td>
	                </tr>
	            </tbody>
	        </table>
    	</container>

    </body>
</html>
